<div class="report-container">
  <div class="filters-section">
  <mat-form-field>
    <mat-label>Location</mat-label>
    <mat-select [formControl]="locationFilter">
      <mat-option value="">All</mat-option>
      <mat-option *ngFor="let loc of locations" [value]="loc">{{loc}}</mat-option>
    </mat-select>
  </mat-form-field>

  <mat-form-field>
    <mat-label>Guest House</mat-label>
    <mat-select [formControl]="guestHouseFilter">
      <mat-option value="">All</mat-option>
      <mat-option *ngFor="let gh of guestHouses" [value]="gh">{{gh}}</mat-option>
    </mat-select>
  </mat-form-field>

  <mat-form-field>
    <mat-label>Status</mat-label>
    <mat-select [formControl]="statusFilter">
      <mat-option value="">All</mat-option>
      <mat-option *ngFor="let status of statuses" [value]="status">{{status}}</mat-option>
    </mat-select>
  </mat-form-field>

  <!-- ADD THIS BLOCK FOR DATE RANGE FILTER -->
  <!-- Place this in your filters-section, after the other <mat-form-field>s -->
<mat-form-field>
  <mat-label>Check In - Check Out</mat-label>
  <mat-date-range-input [formGroup]="dateRangeGroup" [rangePicker]="picker">
    <input matStartDate formControlName="start" placeholder="Start date">
    <input matEndDate formControlName="end" placeholder="End date">
  </mat-date-range-input>
  <mat-date-range-picker #picker></mat-date-range-picker>
  <button mat-icon-button matSuffix (click)="picker.open()" type="button">
    <mat-icon>calendar_today</mat-icon>
  </button>
</mat-form-field>

  <div class="filter-actions">
    <button mat-raised-button color="primary" (click)="loadData()">Filter</button>
    <button mat-raised-button (click)="resetFilters()">Reset</button>
    <button mat-raised-button color="accent" (click)="exportReport()">Export</button>
  </div>
</div>

  <div class="table-container">
  <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">
    <ng-container matColumnDef="serialNo">
      <th mat-header-cell *matHeaderCellDef> Sr no. </th>
      <td mat-cell *matCellDef="let element; let i = index"> {{i + 1}} </td>
    </ng-container>
    <ng-container matColumnDef="userFullName">
      <th mat-header-cell *matHeaderCellDef> Employee Name </th>
      <td mat-cell *matCellDef="let element"> {{element.userFullName}} </td>
    </ng-container>
    <ng-container matColumnDef="address">
      <th mat-header-cell *matHeaderCellDef> Location </th>
      <td mat-cell *matCellDef="let element"> {{element.address}} </td>
    </ng-container>
    <ng-container matColumnDef="guestHouseName">
      <th mat-header-cell *matHeaderCellDef> Guest House </th>
      <td mat-cell *matCellDef="let element"> {{element.guestHouseName}} </td>
    </ng-container>
    <ng-container matColumnDef="roomName">
      <th mat-header-cell *matHeaderCellDef> Room </th>
      <td mat-cell *matCellDef="let element"> {{element.roomName}} </td>
    </ng-container>
    <ng-container matColumnDef="bedNumber">
      <th mat-header-cell *matHeaderCellDef> Bed </th>
      <td mat-cell *matCellDef="let element"> {{element.bedNumber}} </td>
    </ng-container>
    <ng-container matColumnDef="startDate">
      <th mat-header-cell *matHeaderCellDef> Check-In Date </th>
      <td mat-cell *matCellDef="let element"> {{element.startDate | date:'M/d/yy'}} </td>
    </ng-container>
    <ng-container matColumnDef="endDate">
      <th mat-header-cell *matHeaderCellDef> Check-Out Date </th>
      <td mat-cell *matCellDef="let element"> {{element.endDate | date:'M/d/yy'}} </td>
    </ng-container>
    <ng-container matColumnDef="status">
      <th mat-header-cell *matHeaderCellDef> Status </th>
      <td mat-cell *matCellDef="let element">
        <span class="status-badge" [ngClass]="{
            'approved': element.status?.toLowerCase() === 'approved',
            'pending': element.status?.toLowerCase() === 'pending',
            'rejected': element.status?.toLowerCase() === 'rejected'
          }">
          {{element.status}}
        </span>
      </td>
    </ng-container>
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  </table>
  <mat-paginator [pageSizeOptions]="[5, 10, 25]" showFirstLastButtons></mat-paginator>
</div>
</div>